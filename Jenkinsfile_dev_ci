stage 'Dev Sync up'
node ('slave2-67445229') {
git 'git@github.com:gskrscm/gittest.git'
// This is one time activity. 
//sh 'git remote add upstream https://github.com/gitaccountforprashant/gittest.git'
sh 'git fetch upstream'
sh 'git checkout master'
sh 'git merge upstream/master  --no-edit'
sh 'git config user.email "gskr.scm@gmail.com"'
sh 'git config user.name "gskrscm"'
sh 'git push'
}

stage 'Build'
node ('slave2-67445229') {
git 'https://github.com/gskrscm/gittest.git'
sh '''mvn clean install -pl war -am -DskipTests
'''
}

stage 'stage to nexus'
node ('slave2-67445229') {
sh 'curl -v -F r=PAAS -F hasPom=false -F e=war -F g=TescoJenkins -F a=war -F v=${BUILD_NUMBER} -F p=war -F file=/home/ubuntu/workspace/JenkinsDevCI/war/target/jenkins.war -u xq90:Siva!11047666 https://nexus.dev.global.tesco.org/nexus/service/local/artifact/maven/content'
}
